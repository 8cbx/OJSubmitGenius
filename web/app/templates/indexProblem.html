{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "_macros.html" as macros %}

{% block title %}Flasky{% endblock %}

{% block page_content %}
<div class="page-header">
    <h1>Hello, {% if current_user.is_authenticated() %}{{ current_user.username }}{% else %}Stranger{% endif %}!</h1>
</div>
<div>
    {% if current_user.can(Permission.WRITE_ARTICLES) %}
    {{ wtf.quick_form(form) }}
    {% endif %}
</div>
<script type="text/javascript" class="init">
$(document).ready(function() {
    $('#problems').dataTable();
     
    $('#problems tbody').on('click', 'tr', function () {
        var name = $('td', this).eq(0).text();
        alert( 'You clicked on '+name+'\'s row' );
    } );
} );
</script>
<ul class="problems">
	<table id="problems" class="table table-striped table-bordered" cellspacing="0" width="100%">
	<thead>
		<tr>
			<th>OJ</th>
			<th data-orderable="false">PID</th>
			<th>Title</th>
			<th>Total_Submissions</th>
			<th>Accepted</th>
			<th>LastUpdate</th>
		</tr>
	</thead>
	<tfoot>
		<tr>
			<th>OJ</th>
			<th>PID</th>
			<th>Title</th>
			<th>Total_Submissions</th>
			<th>Accepted</th>
			<th>LastUpdate</th>
		</tr>
	</tfoot>
    {% for problems in problems %}
    	<tbody>
            <tr>
                <th>{{ problems.OJ_ID }}</th>
                <th>{{ problems.PID }}</th>
                <th><a href="{{ url_for('main.index') }}">{{ problems.Title }}</th>
                <th>{{ problems.Total_Submissions }}</th>
                <th>{{ problems.Accepted }}</th>
                <th>{{ moment(problems.LastUpdate).fromNow() }}</th>
            </tr>
        </tbody>
    {% endfor %}
    </table>
</ul>
{% include '_posts.html' %}
{% if pagination %}
<div class="pagination">
    {{ macros.pagination_widget(pagination, '.index') }}
</div>
{% endif %}
{% endblock %}
